NotificationCenter=NotificationCenter||{},NotificationCenter.Notifications=NotificationCenter.Notifications||{},NotificationCenter.Notifications.Dropdown=function(t){function n(){this.handleEvents()}var o=t(".notification-toggle").attr("data-unseen"),i=t(".notification-toggle"),e=0;return n.prototype.changeStatus=function(n){return t.ajax({url:ajaxurl,type:"post",data:{action:"change_status",notificationIds:n}})},n.prototype.loadMore=function(n){return e=t(".notification-center__item",n).length,t.ajax({url:ajaxurl,type:"post",data:{action:"load_more",offset:e},beforeSend:function(){n.append('<li class="notification-center__loading loading-wrapper"><div class="loading"><div></div><div></div><div></div><div></div></div></li>')},complete:function(){t(".notification-center__loading",n).remove()},success:function(t){0===t.length?e=null:n.append(t)},error:function(t){e=null}})},n.prototype.handleEvents=function(){t(".notification-center__list").bind("scroll",function(n){$target=t(n.currentTarget),$target.scrollTop()+$target.innerHeight()>=$target[0].scrollHeight&&0===$target.find(".notification-center__loading").length&&null!==e&&this.loadMore($target)}.bind(this)),t(document).on("click",".notification-center__item--unseen",function(n){n.preventDefault();var e=t(n.target).closest("a").attr("href"),a=t(n.target).closest(".notification-center__item--unseen").attr("data-notification-id");this.changeStatus(a),o-=1,i.attr("data-unseen",o),t(n.target).closest(".notification-center__item--unseen").removeClass("notification-center__item--unseen"),setTimeout(function(){window.location.replace(e)},40)}.bind(this))},new n}(jQuery),NotificationCenter=NotificationCenter||{},NotificationCenter.Notifications=NotificationCenter.Notifications||{},NotificationCenter.Notifications.Follow=function(t){function n(){t(function(){this.handleEvents()}.bind(this))}return n.prototype.follow=function(n){return t.ajax({url:ajaxurl,type:"post",data:{action:"follow_post",postId:n}})},n.prototype.handleEvents=function(){t(document).on("click",".follow-button",function(n){n.preventDefault(),$target=t(n.currentTarget);var o=$target.attr("data-post-id");$target.toggleClass("follow-button--following"),$target.hasClass("follow-button--following")?(t(".pricon",$target).removeClass("pricon-star-o").addClass("pricon-star"),t(".follow-button__text",$target).text(notificationCenter.unfollow)):(t(".pricon",$target).removeClass("pricon-star").addClass("pricon-star-o"),t(".follow-button__text",$target).text(notificationCenter.follow)),$target.blur(),this.follow(o)}.bind(this))},new n}(jQuery);var NotificationCenter={};