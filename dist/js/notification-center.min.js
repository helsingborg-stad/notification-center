var NotificationCenter=NotificationCenter||{};NotificationCenter.Notifications=NotificationCenter.Notifications||{},NotificationCenter.Notifications.Dropdown=function(t){function n(){this.handleEvents()}var o=t(".notification-toggle__icon"),e=o.attr("data-unseen"),i=0;return n.prototype.changeStatus=function(n){return t.ajax({url:ajaxurl,type:"post",data:{action:"change_status",notificationIds:n}})},n.prototype.readAll=function(){return t.ajax({url:ajaxurl,type:"post",data:{action:"read_all"}})},n.prototype.loadMore=function(n){return i=t(".notification-center__item",n).length,t.ajax({url:ajaxurl,type:"post",data:{action:"load_more",offset:i},beforeSend:function(){n.append('<li class="notification-center__loading loading-wrapper"><div class="loading"><div></div><div></div><div></div><div></div></div></li>')},complete:function(){t(".notification-center__loading",n).remove()},success:function(t){0===t.length?i=null:n.append(t)},error:function(t){i=null}})},n.prototype.handleEvents=function(){t(".notification-center__list").bind("scroll",function(n){var o=t(n.currentTarget);o.scrollTop()+o.innerHeight()>=o[0].scrollHeight&&0===o.find(".notification-center__loading").length&&null!==i&&this.loadMore(o)}.bind(this)),t(document).on("click",".notification-center__item--unseen",function(n){n.preventDefault();var i=t(n.target).closest("a").attr("href"),a=t(n.target).closest(".notification-center__item--unseen").attr("data-notification-id");this.changeStatus(a),e-=1,o.attr("data-unseen",e),t(n.target).closest(".notification-center__item--unseen").removeClass("notification-center__item--unseen"),setTimeout(function(){window.location.replace(i)},60)}.bind(this)),t(document).on("click",".js-read-all",function(n){n.preventDefault(),o.attr("data-unseen",0),t(".notification-center__item--unseen").removeClass("notification-center__item--unseen"),this.readAll()}.bind(this))},new n}(jQuery),NotificationCenter=NotificationCenter||{},NotificationCenter.Notifications=NotificationCenter.Notifications||{},NotificationCenter.Notifications.Follow=function(t){function n(){t(function(){this.handleEvents()}.bind(this))}return n.prototype.followPost=function(n){return t.ajax({url:ajaxurl,type:"post",data:{action:"follow_post",postId:n}})},n.prototype.followPostType=function(n){return t.ajax({url:ajaxurl,type:"post",data:{action:"follow_post_type",postType:n}})},n.prototype.handleEvents=function(){t(document).on("click",".follow-button",function(n){n.preventDefault(),$target=t(n.currentTarget);var o=$target.data("isArchive");$target.toggleClass("follow-button--following"),$target.hasClass("follow-button--following")?(t(".pricon",$target).removeClass("pricon-star-o").addClass("pricon-star"),t(".follow-button__text",$target).text(notificationCenter.unfollow)):(t(".pricon",$target).removeClass("pricon-star").addClass("pricon-star-o"),t(".follow-button__text",$target).text(notificationCenter.follow)),$target.blur(),o?this.followPostType($target.data("postType")):this.followPost($target.data("postId"))}.bind(this))},new n}(jQuery);var NotificationCenter={};